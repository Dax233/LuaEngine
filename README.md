# LuaEngine

轻量化的怪物猎人世界Lua模组，相比LuaScript拥有更高效的Lua代码调用性能，去除了应用较少的功能，不再提供游戏数据直接读取和修改的接口，转而开放内存读写功能，保留部分游戏调用函数。

  

## 脚本控制指令

所有指令可直接在游戏聊天对话框中输入
实时执行lua指令可使用luac: <命令>
重载lua脚本可使用reload <脚本名>



## 有关图形绘制系统

图形绘制系统使用ImGui进行操作，仅支持DX11显示。

  

## 与LuaScript的兼容问题

由于注册的函数不同，大部分代码是无法直接兼容的，但可以在后续通过编写lua函数库复现LuaScript中的函数功能，然后加载LuaScript中的脚本。LuaEngine和LuaScript的脚本存放目录不同，两个模组可同时运行，但是并不推荐这种方式。

  

## LuaEngine与LuaScript功能对比
大部分LuaEngine功能被写在数据解析引擎中，具体使用方式请参考示例脚本

### Lua辅助功能

> LuaEngine不再重启虚拟机，无需再存入和读取变量，但如果需要跨脚本访问内容，可以使用此功能

> LuaEngine不再提供随机数获取功能，可使用lua自带的随机数生成功能生成随机数

|功能|LuaEngine|LuaScript|
|--|--|--|
| 存入和读取整数变量 | 是 | 是 |
| 存入和读取浮点变量 | 是 | 是 |
| 存入和读取字符串变量 | 是 | 是 |
| 销毁存入的变量 | 是 | 是 |
| 获取随机数 | 否 | 是 |

### Lua系统功能

> 按键检查功能包含键盘和Xbox手柄

|功能|LuaEngine|LuaScript|
|--|--|--|
| 检查按键按下 | 是 | 是 |
| 检查按键双击 | 否 | 是 |
| 检查按键按住 | 是 | 是 |
| 创建计时器 | 是 | 是 |
| 检查计时器是否存在 | 是 | 是 |
| 检查计时器是否到期 | 是 | 是 |
| 删除计时器 | 是 | 是 |
| 游戏内消息 | 是 | 是 |
| 控制台消息 | 是 | 是 |
| 设置子脚本变量名 | 否 | 是 |
| 获取网络数据 | 否 | 是 |
| 下载文件 | 否 | 是 |
| 连接websocket服务 | 否 | 是 |
| 发送websocket信息 | 否 | 是 |
| 获取websocket数据 | 否 | 是 |
| 获取websocket状态 | 否 | 是 |
| 录入脚本信息 | 否 | 是 |


### 内存操作功能

> 内存地址获取功能发生重大变更，详情请参考示例文件

|功能|LuaEngine|LuaScript|
|--|--|--|
| 获取内存地址 | 是 | 是 |
| 获取内存地址数据 | 是 | 是 |
| 设置内存地址数据 | 是 | 是 |

### 游戏功能

|功能|LuaEngine|LuaScript|
|--|--|--|
| 添加特效 | 是 | 是 |
| 获取模组构建版本 | 否 | 是 |
| 获取模组发行版本 | 否 | 是 |
| 获取UUID | 否 | 是 |
| 控制台 | 否 | 是 |
| 添加图片和文字 | 否 | 是 |
| 获取屏幕信息 | 否 | 是 |
| 播放音频 | 否 | 是 |
| 游戏外系统操作 | 否 | 是 |
| ImGui操作 | 是 | 否 |

### 游戏数据

> 玩家Buff较多，请手动获取和设置，引擎暂不提供

> 怪物，环境生物，实体相关操作请获取地址后手动处理

|功能|LuaEngine|LuaScript|
|--|--|--|
| 获取玩家坐标 | 是 | 是 |
| 获取准星坐标 | 是 | 是 |
| 获取武器坐标 | 部分 | 是 |
| 检查瞄准状态 | 是 | 是 |
| 获取增量坐标 | 是 | 是 |
| 获取导航坐标 | 否 | 是 |
| 相机相关 | 否 | 是 |
| 玩家朝向信息 | 否 | 是 |
| 玩家重力信息 | 是 | 是 |
| 获取武器ID和类型 | 是 | 是 |
| 更换玩家武器 | 是 | 是 |
| 玩家动作信息 | 是 | 是 |
| 执行的派生动作是否结束 | 否 | 是 |
| 武器装饰物信息 | 否 | 是 |
| 主副武器操作 | 否 | 是 |
| 玩家命中信息 | 否 | 是 |
| 获取当前动作帧和速率 | 是 | 是 |
| 设置当前动作帧 | 是 | 是 |
| 设置当前动作帧速率 | 否 | 是 |
| 获取和设置玩家生命 | 是 | 是 |
| 获取和设置玩家耐力 | 是 | 是 |
| 获取玩家角色信息 | 否 | 是 |
| 生成投射物 | 否 | 是 |
| 获取和设置玩家buff | 否 | 是 |
| 获取和设置玩家钩爪坐标 | 否 | 是 |
| 获取对玩家仇恨的怪物 | 否 | 是 |
| 艾路猫数据 | 否 | 是 |
| 获取当前地图Id | 是 | 是 |
| 获取当前时间 | 是 | 是 |
| 获取Steam好友Id | 否 | 是 |
| 获取集会区域代码 | 否 | 是 |
| 获取投射物数据 | 否 | 是 |
| 获取任务ID | 是 | 是 |
| 获取和设置任务状态 | 是 | 是 |
| 设置下一个任务 | 否 | 是 |
| 获取怪物 | 否 | 是 |
| 获取环境生物 | 否 | 是 |
| 怪物相关数据 | 否 | 是 |
| 环境生物相关数据 | 否 | 是 |
| 实体操作 | 否 | 是 |